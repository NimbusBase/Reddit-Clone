// Generated by CoffeeScript 1.4.0
(function() {
  var syncInfo;

  syncInfo = {
    "GCloud": {
      "key": '195693500289.apps.googleusercontent.com',
      "scope": 'https://www.googleapis.com/auth/devstorage.full_control',
      "app_name": "waiter-code-sample-bucket",
      "api_key": 'AIzaSyBVDs0bXkbSuflogzPL_JgMUPgRPXSDcCc',
      "project_id": "195693500289"
    }
  };

  Nimbus.Auth.setup(syncInfo);

  window.Post = Nimbus.Model.setup("Post", ["title", "link", "category"]);

  window.Comment = Nimbus.Model.setup("Comment", ["postid", "comment"]);

  Nimbus.Auth.set_app_ready(function() {
    if (Nimbus.Auth.authorized) {
      localStorage["user_email"] = window.user_email;
      Post.sync_all();
      return Comment.sync_all();
    } else {

    }
  });

  window.addPost = function(title, link) {
    var post;
    post = {
      "title": title,
      "category": null,
      "link": link,
      "owner": window.user_email
    };
    return window.Post.create(post);
  };

  window.addComment = function(postid, comment) {
    var newcomment;
    newcomment = {
      "postid": postid,
      "comment": comment,
      "owner": window.user_email
    };
    return window.Comment.create(newcomment);
  };

}).call(this);
